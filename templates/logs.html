<!DOCTYPE html>
<html lang="pt-BR" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logs do Sistema - PATO SO</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="admin-layout">
        {% include 'sidebar.html' %}
        
        <div class="main-content">
            <button class="theme-toggle" id="themeToggle">🌙</button>
            
            <div class="top-bar">
                <h1>Logs do Sistema</h1>
            </div>
            
            <div class="content-area">
                <div class="table-container">
                    <table class="logs-table">
                        <thead>
                            <tr>
                                <th>ID</th>
                                <th>Usuário</th>
                                <th>Ação</th>
                                <th>Detalhes</th>
                                <th>Data/Hora</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for log in logs %}
                            <tr>
                                <td>{{ log.id }}</td>
                                <td>{{ log.username or 'Sistema' }}</td>
                                <td>
                                    <span class="badge badge-info">{{ log.action }}</span>
                                </td>
                                <td>{{ log.details }}</td>
                                <td>{{ log.timestamp }}</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        const currentTheme = localStorage.getItem('theme') ? localStorage.getItem('theme') : null;

        if (currentTheme) {
            document.documentElement.setAttribute('data-theme', currentTheme);
            if (currentTheme === 'dark') {
                themeToggle.textContent = '☀️';
            }
        }

        themeToggle.addEventListener('click', () => {
            let theme = document.documentElement.getAttribute('data-theme');
            if (theme === 'dark') {
                document.documentElement.setAttribute('data-theme', 'light');
                localStorage.setItem('theme', 'light');
                themeToggle.textContent = '🌙';
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                localStorage.setItem('theme', 'dark');
                themeToggle.textContent = '☀️';
            }
        });
        
        // Função para alternar submenus
        function toggleMenu(element) {
            const submenu = element.nextElementSibling;
            const isActive = submenu.classList.contains('active');
            
            // Fecha todos os submenus abertos
            document.querySelectorAll('.submenu.active').forEach(openSubmenu => {
                if (openSubmenu !== submenu) {
                    openSubmenu.classList.remove('active');
                    openSubmenu.previousElementSibling.classList.remove('active');
                }
            });

            // Abre ou fecha o submenu clicado
            submenu.classList.toggle('active');
            element.classList.toggle('active');
        }
    </script>
</body>
</html>
